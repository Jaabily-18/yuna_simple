<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Yuna - Plan Like a Woman</title>

<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

<div class="main-wrapper">

<div class="app-container" id="setup-wizard">

<div class="card active" id="card-1">
<div class="card-content centered">
<h1 class="logo">Yuna</h1>
<h2 class="tagline">Plan like a woman.</h2>
<p class="subtext">A daily planner synchronized with your biological rhythm.</p>
<button class="btn-primary" onclick="handleStartClick()">Begin Setup</button>
<p id="user-greeting" class="fade-in-text"></p>
</div>
</div>

<div class="card" id="card-login">
<div class="card-content centered">
<span class="step">Account</span>
<h3>Save your cycle data</h3>
<p class="subtext">Create an account so you don't lose your data.</p>

<button class="btn-google" onclick="signInWithGoogle()">
<img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
Continue with Google
</button>

<button class="btn-text" onclick="skipLogin()">Continue as Guest</button>
</div>
</div>

<div class="card" id="card-2" data-type="input">
<div class="card-content">
<span class="step">Cycle Baseline • 1/5</span>
<h3>Average cycle length?</h3>
<span class="subtext">Usually between 21-35 days</span>

<div class="input-group">
<input type="number" placeholder="28" id="input-2">
</div>

<p class="error-msg" id="error-2">Please enter a valid number.</p>
<button class="btn-primary" onclick="validateAndNext(2)">Next Step</button>
</div>
</div>

<div class="card" id="card-3" data-type="input">
<div class="card-content">
<span class="step">Cycle Baseline • 2/5</span>
<h3>When did your last period start?</h3>

<div class="input-group">
<input type="date" id="input-3">
</div>

<p class="error-msg" id="error-3">Please select a date.</p>
<button class="btn-primary" onclick="validateAndNext(3)">Next Step</button>
</div>
</div>

<div class="card" id="card-4" data-type="input">
<div class="card-content">
<span class="step">Cycle Baseline • 3/5</span>
<h3>How many days does it last?</h3>

<div class="input-group">
<input type="number" placeholder="5" id="input-4">
</div>

<p class="error-msg" id="error-4">Please enter a number.</p>
<button class="btn-primary" onclick="validateAndNext(4)">Next Step</button>
</div>
</div>

<div class="card" id="card-5">
<div class="card-content">
<span class="step">Cycle Baseline • 4/5</span>
<h3>How regular is your cycle?</h3>

<div class="options-grid">
<button class="option-btn" onclick="selectOption(this,5)">Very regular</button>
<button class="option-btn" onclick="selectOption(this,5)">Somewhat irregular</button>
<button class="option-btn" onclick="selectOption(this,5)">Highly irregular</button>
<button class="option-btn" onclick="selectOption(this,5)">I don't know</button>
</div>
</div>
</div>

<div class="card" id="card-6">
<div class="card-content">
<span class="step">Cycle Baseline • 5/5</span>
<h3>Missed periods in last 6 months?</h3>

<div class="options-grid">
<button class="option-btn" onclick="selectOption(this,6)">Yes</button>
<button class="option-btn" onclick="selectOption(this,6)">No</button>
</div>
</div>
</div>

<div class="card" id="card-7">
<div class="card-content">
<span class="step">Medical Context • 1/4</span>
<h3>Using hormonal birth control?</h3>

<div class="options-grid">
<button class="option-btn" onclick="selectOption(this,7)">No</button>
<button class="option-btn" onclick="selectOption(this,7)">The Pill</button>
<button class="option-btn" onclick="selectOption(this,7)">IUD</button>
<button class="option-btn" onclick="selectOption(this,7)">Other</button>
</div>
</div>
</div>

<div class="card" id="card-8">
<div class="card-content">
<span class="step">Medical Context • 2/4</span>
<h3>Diagnosed with any of these?</h3>

<div class="options-grid">
<label><input type="checkbox"> PCOS</label>
<label><input type="checkbox"> Thyroid disorder</label>
<label><input type="checkbox"> Endometriosis</label>
<label><input type="checkbox"> None</label>
</div>

<button class="btn-primary" onclick="validateAndNext(8)">Next Step</button>
</div>
</div>

<div class="card" id="card-10">
<div class="card-content">
<span class="step">Lifestyle</span>
<h3>Average sleep per night?</h3>

<div class="input-group">
<input type="number" id="input-10">
</div>

<button class="btn-primary" onclick="validateAndNext(10)">Next Step</button>
</div>
</div>

<div class="card" id="card-12">
<div class="card-content centered">
<h1 class="logo">Yuna</h1>
<p>Your cycle is synced.</p>
<button class="btn-primary" onclick="enterDashboard()">Enter Dashboard</button>
</div>
</div>

</div>

<!-- DASHBOARD -->
<div class="dashboard-view" id="dashboard-view">
<h2>Dashboard</h2>
</div>

</div>

<!-- ================= FIREBASE CONFIG ================= -->
<script>
const firebaseConfig = {
apiKey: "YOUR_API_KEY",
authDomain: "yuna-sample.firebaseapp.com",
projectId: "yuna-sample",
storageBucket: "yuna-sample.appspot.com",
messagingSenderId: "1045272222825",
appId: "1:1045272222825:web:YOUR_APP_ID"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();
</script>

<!-- ================= AUTH ================= -->
<script>
function signInWithGoogle() {
const provider = new firebase.auth.GoogleAuthProvider();

auth.signInWithPopup(provider)
.then(result => {
document.getElementById("user-greeting").innerText =
"Welcome, " + result.user.displayName;
});
}

function skipLogin() {
auth.signInAnonymously();
}
</script>

<!-- ================= SAVE DATA ================= -->
<script>
async function saveUserSetupData() {

const user = auth.currentUser;
if(!user) return;

const data = {
cycleLength: document.getElementById("input-2")?.value || null,
lastPeriodDate: document.getElementById("input-3")?.value || null,
periodDuration: document.getElementById("input-4")?.value || null,
sleepAverage: document.getElementById("input-10")?.value || null,
updatedAt: firebase.firestore.FieldValue.serverTimestamp()
};

await db.collection("users").doc(user.uid).set({
profile: data
},{merge:true});
}

function enterDashboard(){
saveUserSetupData();
document.getElementById("setup-wizard").style.display="none";
document.getElementById("dashboard-view").style.display="block";
}
</script>

<script src="script.js"></script>

<script>
lucide.createIcons();
</script>

</body>
</html>
